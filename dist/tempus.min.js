var p=0;function a(){return p++}var n=typeof window<"u",m=n&&window.requestAnimationFrame,o=n&&window.cancelAnimationFrame,r=class{callbacks;fps;time;lastTickDate;constructor(e=Number.POSITIVE_INFINITY){this.callbacks=[],this.fps=e,this.time=0,this.lastTickDate=performance.now()}get executionTime(){return 1e3/this.fps}dispatch(e,i){for(let t=0;t<this.callbacks.length;t++)this.callbacks[t]?.callback(e,i)}raf(e,i){if(this.time+=i,this.fps===Number.POSITIVE_INFINITY)this.dispatch(e,i);else if(this.time>=this.executionTime){this.time=this.time%this.executionTime;let t=e-this.lastTickDate;this.lastTickDate=e,this.dispatch(e,t)}}add({callback:e,priority:i}){typeof e!="function"&&console.error("Tempus.add: callback is not a function");let t=a();return this.callbacks.push({callback:e,priority:i,uid:t}),this.callbacks.sort((h,f)=>h.priority-f.priority),()=>this.remove(t)}remove(e){this.callbacks=this.callbacks.filter(({uid:i})=>e!==i)}},s=class{framerates;time;constructor(){this.framerates={},this.time=performance.now(),requestAnimationFrame(this.raf)}add(e,{priority:i=0,fps:t=Number.POSITIVE_INFINITY}={}){if(typeof t=="number")return this.framerates[t]||(this.framerates[t]=new r(t)),this.framerates[t].add({callback:e,priority:i})}raf=e=>{requestAnimationFrame(this.raf,!0);let i=e-this.time;this.time=e;for(let t of Object.values(this.framerates))t.raf(e,i)};patch(){window.requestAnimationFrame=(e,{priority:i=0,fps:t=Number.POSITIVE_INFINITY}={})=>e===this.raf||!e.toString().includes("requestAnimationFrame(")?m(e):(e.__tempusPatched||(e.__tempusPatched=!0,e.__tempusUnsubscribe=this.add(e,{priority:i,fps:t})),e.__tempusUnsubscribe),window.cancelAnimationFrame=e=>{if(typeof e=="function"){e?.();return}return o(e)}}unpatch(){window.requestAnimationFrame=m,window.cancelAnimationFrame=o}},l=n?new s:void 0,u=l;globalThis.Tempus=u;
//# sourceMappingURL=tempus.min.js.map