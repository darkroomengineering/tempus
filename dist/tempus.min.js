var f=0;function n(){return f++}var a=window.requestAnimationFrame,m=window.cancelAnimationFrame,r=class{callbacks;fps;time;lastTickDate;constructor(t=1/0){this.callbacks=[],this.fps=t,this.time=0,this.lastTickDate=performance.now()}get executionTime(){return 1e3/this.fps}dispatch(t,i){for(let e=0;e<this.callbacks.length;e++)this.callbacks[e]?.callback(t,i)}raf(t,i){if(this.time+=i,this.fps===1/0)this.dispatch(t,i);else if(this.time>=this.executionTime){this.time=this.time%this.executionTime;let e=t-this.lastTickDate;this.lastTickDate=t,this.dispatch(t,e)}}add({callback:t,priority:i}){typeof t!="function"&&console.error("Tempus.add: callback is not a function");let e=n();return this.callbacks.push({callback:t,priority:i,uid:e}),this.callbacks.sort((c,h)=>c.priority-h.priority),()=>this.remove(e)}remove(t){this.callbacks=this.callbacks.filter(({uid:i})=>t!==i)}},s=class{framerates;time;constructor(){this.framerates={},this.time=performance.now(),requestAnimationFrame(this.raf)}add(t,{priority:i=0,fps:e=1/0}={}){if(typeof e=="number")return this.framerates[e]||(this.framerates[e]=new r(e)),this.framerates[e].add({callback:t,priority:i})}raf=t=>{requestAnimationFrame(this.raf,!0);let i=t-this.time;this.time=t;for(let e of Object.values(this.framerates))e.raf(t,i)};patch(){window.requestAnimationFrame=(t,{priority:i=0,fps:e=1/0}={})=>t===this.raf||!t.toString().includes("requestAnimationFrame(")?a(t):(t.__tempusPatched||(t.__tempusPatched=!0,t.__tempusUnsubscribe=this.add(t,{priority:i,fps:e})),t.__tempusUnsubscribe),window.cancelAnimationFrame=t=>{if(typeof t=="function"){t?.();return}return m(t)}}unpatch(){window.requestAnimationFrame=a,window.cancelAnimationFrame=m}},p=typeof window<"u",l=p&&new s,o=l;globalThis.Tempus=o;
//# sourceMappingURL=tempus.min.js.map