{"version":3,"file":"tempus.mjs","sources":["../src/index.js"],"sourcesContent":["class Tempus {\r\n  constructor() {\r\n    this.callbacks = []\r\n    this.now = performance.now()\r\n    requestAnimationFrame(this.raf)\r\n  }\r\n\r\n  add(callback, priority = 0) {\r\n    this.callbacks.push({ callback, priority })\r\n    this.callbacks.sort((a, b) => a.priority - b.priority)\r\n\r\n    return () => this.remove(callback)\r\n  }\r\n\r\n  remove(callback) {\r\n    this.callbacks = this.callbacks.filter(({ callback: cb }) => callback !== cb)\r\n  }\r\n\r\n  raf = (now) => {\r\n    requestAnimationFrame(this.raf)\r\n\r\n    const deltaTime = now - this.now\r\n    this.now = now\r\n\r\n    for (let i = 0; i < this.callbacks.length; i++) {\r\n      this.callbacks[i].callback(now, deltaTime)\r\n    }\r\n  }\r\n}\r\n\r\nconst isClient = typeof window !== 'undefined'\r\n\r\nexport default isClient && new Tempus()\r\n"],"names":["isClient","raf","now","requestAnimationFrame","_this","deltaTime","i","callbacks","length","callback","this","performance","_proto","Tempus","prototype","add","priority","push","sort","a","b","_this2","remove","filter","_ref"],"mappings":"IAgCeA,EAFoB,4BAER,iBAhCf,WACV,aAiBAC,IAAAA,EAAAA,KAAAA,KAAAA,IAAM,SAACC,GACLC,sBAAsBC,EAAKH,KAE3B,IAAeI,EAAGH,EAAME,EAAKF,IAC7BE,EAAKF,IAAMA,EAEX,IAAK,IAAII,EAAI,EAAGA,EAAIF,EAAKG,UAAUC,OAAQF,IACzCF,EAAKG,UAAUD,GAAGG,SAASP,EAAKG,EAEpC,EAzBEK,KAAKH,UAAY,GACjBG,KAAKR,IAAMS,YAAYT,MACvBC,sBAAsBO,KAAKT,IAC7B,CAAC,IAAAW,EAAAC,EAAAC,UAyBH,OAzBGF,EAEDG,IAAA,SAAIN,EAAUO,GAAAA,IAAAA,EAAAA,KAIZ,gBAJYA,IAAAA,EAAW,GACvBN,KAAKH,UAAUU,KAAK,CAAER,SAAAA,EAAUO,SAAAA,IAChCN,KAAKH,UAAUW,KAAK,SAACC,EAAGC,GAAC,SAAOJ,SAAWI,EAAEJ,QAAQ,GAExC,WAAA,OAAAK,EAAKC,OAAOb,EAAS,CACpC,EAEAa,EAAAA,OAAA,SAAOb,GACLC,KAAKH,UAAYG,KAAKH,UAAUgB,OAAO,YAAsBd,OAAAA,IAAPe,EAAZf,QAAkC,EAC9E,EAcFI,CAAA,CA9BY"}