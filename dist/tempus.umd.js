!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t||self).tempus=i()}(this,function(){var t=0,i=window.requestAnimationFrame,e=window.cancelAnimationFrame,n=/*#__PURE__*/function(){function i(t){void 0===t&&(t=Infinity),this.callbacks=[],this.fps=t,this.time=0,this.lastTickDate=performance.now()}var e,n,r=i.prototype;return r.dispatch=function(t,i){for(var e=0;e<this.callbacks.length;e++)this.callbacks[e].callback(t,i)},r.raf=function(t,i){if(this.time+=i,Infinity===this.fps)this.dispatch(t,i);else if(this.time>=this.executionTime){this.time=this.time%this.executionTime;var e=t-this.lastTickDate;this.lastTickDate=t,this.dispatch(t,e)}},r.add=function(i){var e=this,n=i.callback,r=i.priority;"function"!=typeof n&&console.error("Tempus.add: callback is not a function");var a=t++;return this.callbacks.push({callback:n,priority:r,uid:a}),this.callbacks.sort(function(t,i){return t.priority-i.priority}),function(){return e.remove(a)}},r.remove=function(t){this.callbacks=this.callbacks.filter(function(i){return t!==i.uid})},e=i,(n=[{key:"executionTime",get:function(){return 1e3/this.fps}}])&&function(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,"symbol"==typeof(r=function(t,i){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key))?r:String(r),n)}var r}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),r=/*#__PURE__*/function(){function t(){var t=this;this.raf=function(i){requestAnimationFrame(t.raf,!0);var e=i-t.time;t.time=i;for(var n=0,r=Object.values(t.framerates);n<r.length;n++)r[n].raf(i,e)},this.framerates={},this.time=performance.now(),requestAnimationFrame(this.raf)}var r=t.prototype;return r.add=function(t,i){var e=void 0===i?{}:i,r=e.priority,a=void 0===r?0:r,o=e.fps,s=void 0===o?Infinity:o;if("number"==typeof s)return this.framerates[s]||(this.framerates[s]=new n(s)),this.framerates[s].add({callback:t,priority:a})},r.patch=function(){var t=this;window.requestAnimationFrame=function(e,n){var r=void 0===n?{}:n,a=r.priority,o=void 0===a?0:a,s=r.fps,c=void 0===s?Infinity:s;return e!==t.raf&&e.toString().includes("requestAnimationFrame(")?(e.__tempusPatched||(e.__tempusPatched=!0,e.__tempusUnsubscribe=t.add(e,{priority:o,fps:c})),e.__tempusUnsubscribe):i(e)},window.cancelAnimationFrame=function(t){return"function"==typeof t&&(null==t||t()),e(t)}},r.unpatch=function(){window.requestAnimationFrame=i,window.cancelAnimationFrame=e},t}();return"undefined"!=typeof window&&new r});
//# sourceMappingURL=tempus.umd.js.map
