{"version":3,"file":"tempus.modern.mjs","sources":["../src/index.js"],"sourcesContent":["class Tempus {\r\n  constructor() {\r\n    this.callbacks = []\r\n    this.now = performance.now()\r\n    requestAnimationFrame(this.raf)\r\n  }\r\n\r\n  add(callback, priority = 0) {\r\n    this.callbacks.push({ callback, priority })\r\n    this.callbacks.sort((a, b) => a.priority - b.priority)\r\n\r\n    return () => this.remove(callback)\r\n  }\r\n\r\n  remove(callback) {\r\n    this.callbacks = this.callbacks.filter(({ callback: cb }) => callback !== cb)\r\n  }\r\n\r\n  raf = (now) => {\r\n    requestAnimationFrame(this.raf)\r\n\r\n    const deltaTime = now - this.now\r\n    this.now = now\r\n\r\n    for (let i = 0; i < this.callbacks.length; i++) {\r\n      this.callbacks[i].callback(now, deltaTime)\r\n    }\r\n  }\r\n}\r\n\r\nconst isClient = typeof window !== 'undefined'\r\n\r\nexport default isClient && new Tempus()\r\n"],"names":["window","constructor","raf","now","requestAnimationFrame","this","deltaTime","i","callbacks","length","callback","performance","add","priority","push","sort","a","b","remove","filter","cb"],"mappings":"AAgCA,MAFmC,oBAAXA,QAEG,IAhC3B,MACEC,mBAiBAC,IAAOC,IACLC,sBAAsBC,KAAKH,KAE3B,MAAMI,EAAYH,EAAME,KAAKF,IAC7BE,KAAKF,IAAMA,EAEX,IAAK,IAAII,EAAI,EAAGA,EAAIF,KAAKG,UAAUC,OAAQF,IACzCF,KAAKG,UAAUD,GAAGG,SAASP,EAAKG,EAClC,EAxBAD,KAAKG,UAAY,GACjBH,KAAKF,IAAMQ,YAAYR,MACvBC,sBAAsBC,KAAKH,IAC7B,CAEAU,IAAIF,EAAUG,EAAW,GAIvB,OAHAR,KAAKG,UAAUM,KAAK,CAAEJ,WAAUG,aAChCR,KAAKG,UAAUO,KAAK,CAACC,EAAGC,IAAMD,EAAEH,SAAWI,EAAEJ,UAEtC,IAAMR,KAAKa,OAAOR,EAC3B,CAEAQ,OAAOR,GACLL,KAAKG,UAAYH,KAAKG,UAAUW,OAAO,EAAGT,SAAUU,KAASV,IAAaU,EAC5E"}